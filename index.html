<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>Legado 书源仓库</title>
    <style>
        body { max-width: 800px; margin: 20px auto; padding: 0 20px; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif; }
        h1 { color: #24292f; border-bottom: 1px solid #d8dee4; }
        .section { margin: 25px 0; padding: 15px; background: #f6f8fa; border-radius: 6px; }
        a { color: #0969da; text-decoration: none; }
        a:hover { text-decoration: underline; }
        .json-link { display: block; margin: 8px 0; word-break: break-all; }
    </style>
</head>
<body>
    <h1>📚 LegadoPublic 书源仓库</h1>
    
    <div class="section">
        <h2>仓库介绍</h2>
        <p>这是一个维护Legado阅读器书源的仓库，包含持续更新的优质书源数据。</p>
    </div>

    <div class="section">
        <h2>📦 书源合集</h2>
        <a href="/bookSources/bookSource.json" 
           class="json-link" 
           target="_blank">
           🔗 完整书源合集（bookSource.json）
        </a>
    </div>

    <div class="section">
        <h2>📂 单个书源</h2>
        <div id="individual-sources">
            <!-- 动态生成单个书源链接 -->
            <script>
                // 配置参数（需要用户修改）
                const config = {
                    username: "FamMcao",  // 替换为GitHub用户名
                    repo: "legadoPublic",     // 仓库名称
                    branch: "main",           // 分支名称
                    folder: "bookSources/each" // 书源目录
                };

                // 获取书源列表
                fetch(`https://api.github.com/repos/${config.username}/${config.repo}/contents/${config.folder}?ref=${config.branch}`)
                    .then(response => response.json())
                    .then(files => {
                        const container = document.getElementById('individual-sources');
                        files.forEach(file => {
                            if (file.name.endsWith('.json')) {
                                const link = document.createElement('a');
                                link.href = `https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/${config.folder}/${file.name}`;
                                link.className = 'json-link';
                                link.target = '_blank';
                                link.innerHTML = `📄 ${file.name}`;
                                container.appendChild(link);
                            }
                        });
                    });
            </script>
        </div>
    </div>
</body>
</html>
